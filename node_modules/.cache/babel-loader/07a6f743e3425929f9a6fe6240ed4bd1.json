{"ast":null,"code":"import { useState } from 'react';\nimport { useIntervalWhen } from './useIntervalWhen.js';\n\n/**\r\n *\r\n * useCountdown\r\n * Easy way to countdown until a given endtime in intervals\r\n *\r\n * @param endTime Time to countdown\r\n * @param options  Countdown options\r\n * @see https://react-hooks.org/docs/useCountdown\r\n */\nfunction useCountdown(endTime) {\n  let options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  const {\n    interval = 1000,\n    onDown,\n    onEnd\n  } = options;\n  const [time, setTime] = useState(() => new Date());\n  const restTime = endTime.getTime() - time.getTime();\n  const count = restTime > 0 ? Math.ceil(restTime / interval) : 0;\n  useIntervalWhen(onTick, count ? interval : undefined, true, true);\n  return count;\n  function onTick() {\n    const newTime = new Date();\n    if (newTime > endTime) {\n      if (onEnd) {\n        onEnd(newTime);\n      }\n      setTime(endTime);\n      return;\n    }\n    if (onDown) {\n      onDown(restTime, newTime);\n    }\n    setTime(newTime);\n  }\n}\nexport { useCountdown };","map":{"version":3,"names":["useState","useIntervalWhen","useCountdown","endTime","options","interval","onDown","onEnd","time","setTime","Date","restTime","getTime","count","Math","ceil","onTick","undefined","newTime"],"sources":["C:/github/wanted/node_modules/rooks/dist/esm/hooks/useCountdown.js"],"sourcesContent":["import { useState } from 'react';\nimport { useIntervalWhen } from './useIntervalWhen.js';\n\n/**\r\n *\r\n * useCountdown\r\n * Easy way to countdown until a given endtime in intervals\r\n *\r\n * @param endTime Time to countdown\r\n * @param options  Countdown options\r\n * @see https://react-hooks.org/docs/useCountdown\r\n */\r\nfunction useCountdown(endTime, options = {}) {\r\n    const { interval = 1000, onDown, onEnd } = options;\r\n    const [time, setTime] = useState(() => new Date());\r\n    const restTime = endTime.getTime() - time.getTime();\r\n    const count = restTime > 0 ? Math.ceil(restTime / interval) : 0;\r\n    useIntervalWhen(onTick, count ? interval : undefined, true, true);\r\n    return count;\r\n    function onTick() {\r\n        const newTime = new Date();\r\n        if (newTime > endTime) {\r\n            if (onEnd) {\r\n                onEnd(newTime);\r\n            }\r\n            setTime(endTime);\r\n            return;\r\n        }\r\n        if (onDown) {\r\n            onDown(restTime, newTime);\r\n        }\r\n        setTime(newTime);\r\n    }\r\n}\n\nexport { useCountdown };\n"],"mappings":"AAAA,SAASA,QAAQ,QAAQ,OAAO;AAChC,SAASC,eAAe,QAAQ,sBAAsB;;AAEtD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAASC,YAAY,CAACC,OAAO,EAAgB;EAAA,IAAdC,OAAO,uEAAG,CAAC,CAAC;EACvC,MAAM;IAAEC,QAAQ,GAAG,IAAI;IAAEC,MAAM;IAAEC;EAAM,CAAC,GAAGH,OAAO;EAClD,MAAM,CAACI,IAAI,EAAEC,OAAO,CAAC,GAAGT,QAAQ,CAAC,MAAM,IAAIU,IAAI,EAAE,CAAC;EAClD,MAAMC,QAAQ,GAAGR,OAAO,CAACS,OAAO,EAAE,GAAGJ,IAAI,CAACI,OAAO,EAAE;EACnD,MAAMC,KAAK,GAAGF,QAAQ,GAAG,CAAC,GAAGG,IAAI,CAACC,IAAI,CAACJ,QAAQ,GAAGN,QAAQ,CAAC,GAAG,CAAC;EAC/DJ,eAAe,CAACe,MAAM,EAAEH,KAAK,GAAGR,QAAQ,GAAGY,SAAS,EAAE,IAAI,EAAE,IAAI,CAAC;EACjE,OAAOJ,KAAK;EACZ,SAASG,MAAM,GAAG;IACd,MAAME,OAAO,GAAG,IAAIR,IAAI,EAAE;IAC1B,IAAIQ,OAAO,GAAGf,OAAO,EAAE;MACnB,IAAII,KAAK,EAAE;QACPA,KAAK,CAACW,OAAO,CAAC;MAClB;MACAT,OAAO,CAACN,OAAO,CAAC;MAChB;IACJ;IACA,IAAIG,MAAM,EAAE;MACRA,MAAM,CAACK,QAAQ,EAAEO,OAAO,CAAC;IAC7B;IACAT,OAAO,CAACS,OAAO,CAAC;EACpB;AACJ;AAEA,SAAShB,YAAY"},"metadata":{},"sourceType":"module"}